<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>예약 추가</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
<h1>새 예약 추가</h1>
<form th:action="@{/reservations}" method="post">
    <label for="doctorId">의사 ID:</label>
    <input type="number" id="doctorId" name="doctorId" required>
    <br>

    <label for="patientId">환자 ID:</label>
    <input type="number" id="patientId" name="patientId" required>
    <br>
    <div style="display: flex; align-items: center; gap: 10px;">
        <label for="reservationDate">예약 날짜:</label>
        <input type="date" id="reservationDate" name="reservationDate" required>
        <label for="reservationTime">예약 시간:</label>
        <select id="reservationTime" required>
            <option value="">-- 시간 선택 --</option>
            <script>
                for (let hour = 0; hour < 24; hour++) {
                    const start = hour.toString().padStart(2, '0');
                    const end = (hour + 1).toString().padStart(2, '0');
                    document.write(`<option value="${start}:00">${start}:00 ~ ${end}:00</option>`);
                }
            </script>
        </select>
    </div>
    <input type="hidden" name="reservationTime" id="reservationDateTime">
    <br>
    <button type="submit">예약하기</button>
</form>

<script>
    const dateInput = document.getElementById("reservationDate");
    const timeSelect = document.getElementById("reservationTime");
    const hiddenInput = document.getElementById("reservationDateTime");

    function updateReservationDateTime() {
        if (dateInput.value && timeSelect.value) {
            hiddenInput.value = `${dateInput.value}T${timeSelect.value}:00`;
        }
    }

    dateInput.addEventListener("change", updateReservationDateTime);
    timeSelect.addEventListener("change", updateReservationDateTime);
</script>
<br>
<a href="/reservations">예약 목록으로 돌아가기</a>
</body>
</html>